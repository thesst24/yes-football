<div class="con-all" *ngIf="!isOnEventsPage">
  <!-- ✅ MAIN CONTAINER -->
  <div class="container">
    <!-- HEADER -->
    <div
      class="header flex flex-col md:flex-row justify-between items-start md:items-center bg-white py-[14px] px-[15px] rounded-[15px] mb-6 gap-4"
    >
      <div class="season flex flex-col sm:flex-row gap-2 sm:gap-8 w-full">
        <h2
          class="text-[16px] font-bold cursor-pointer hover:underline"
          (click)="openListSeasons()"
        >
          {{ selectedSeason?.name || 'Select Season' }}

          <span class="block sm:inline text-gray-500 font-normal" *ngIf="selectedSeason">
            {{ selectedSeason.startDate | date: 'yyyy/MM/dd' }} -
            {{ selectedSeason.endDate | date: 'yyyy/MM/dd' }}
          </span>
        </h2>

        <!-- ✅ CHECKBOX -->
        <div class="show-past-event flex items-center gap-2">
          <input type="checkbox" [(ngModel)]="showAllSessions" (change)="toggleShowAllSessions()" />
          <p class="text-[16px]">Show Past Sessions</p>
        </div>
      </div>

      <!-- ✅ POPUP Manage Season -->
      <button
        (click)="openPopup()"
       class="bg-[#0db328] w-full md:w-[215px] h-[45px] rounded-[6px] text-white hover:bg-[#09771b] transition-colors"
      >
        Manage Season
      </button>

      
    </div>
  </div>

  <!-- ✅ Popup -->
      <div class="overlay" *ngIf="showPopup">
        <div class="popup-manage-season">
          <app-manage-season (close)="closePopup(true)"></app-manage-season>
        </div>
      </div>

  <!-- ✅ POPUP LIST -->
  <div class="overlay" *ngIf="showList">
    <div class="modal-content">
      <div class="header-container">
        <h2>Season List</h2>
        <button class="btn-close-icon" (click)="closeListSeasons()">X</button>
      </div>

      <p-table [value]="seasons" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Season Name</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-season>
          <tr
            (click)="selectSeason(season)"
            [class.selected-row]="selectedSeason?._id === season._id"
            style="cursor: pointer"
          >
            <td>{{ season.name }}</td>
            <td>{{ season.startDate | date: 'dd/MM/yyyy' }}</td>
            <td>{{ season.endDate | date: 'dd/MM/yyyy' }}</td>

            <td>
              <span [class]="'status-badge ' + season.status">
                {{ season.status }}
              </span>
            </td>

            <td>
              <span *ngIf="selectedSeason?._id === season._id">✅</span>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

  <!-- ✅ SESSION LIST -->
  <div class="session-list" *ngIf="sessions.length > 0">
    <h3 class="font-bold mb-2 text-[#293690]">Sessions for {{ selectedSeason?.name }}</h3>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:flex md:flex-wrap gap-3">
    <button *ngFor="let s of sessions" (click)="selectSession(s)"
      class="w-full md:w-[140px] h-[55px] text-white rounded-lg text-sm md:text-base transition-transform active:scale-95"
      [ngClass]="{
        'bg-[#0db328]': isNextSession(s),
        'bg-gray-400': s.status === 'completed',
        'bg-[#293690]': isTodaySession(s)
      }">
      {{ s.date | date: 'EEE dd/MM' }}
    </button>
  </div>
  </div>
</div>

<!-- ✅ ROUTER OUTLET -->
<router-outlet></router-outlet>
